<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Filter Demo - Choose Your Style</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .upload-section {
            background: white;
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        
        .upload-button {
            background: #1F6D5A;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        
        .upload-button:hover {
            background: #155a4a;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .filter-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .filter-image {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 8px;
            margin-bottom: 10px;
            background: #f8f8f8;
        }
        
        .filter-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        
        .filter-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .processing-time {
            font-size: 12px;
            color: #1F6D5A;
            font-weight: 500;
        }
        
        .copy-button {
            background: #f0f0f0;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 8px;
        }
        
        .copy-button:hover {
            background: #e0e0e0;
        }
        
        .original-image {
            max-width: 500px;
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 8px;
            margin: 20px 0;
            background: #f8f8f8;
        }
        
        .images-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .image-section {
            text-align: center;
        }
        
        .image-filename {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .performance-note {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
            color: #2d5a2d;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ¨ Image Filter Demo - Choose Your Style</h1>
    <p>Upload an image to see different filter options with processing times. These are the "pop music equivalent" filters - universally appealing!</p>
    
    <div class="upload-section">
        <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
        <button class="upload-button" onclick="document.getElementById('imageInput').click()">
            ðŸ“¸ Upload Images (Multiple)
        </button>
        <div id="originalSection" style="display: none;">
            <h3>Original Images</h3>
            <div id="originalImages" class="images-container"></div>
        </div>
    </div>
    
    <div id="filtersContainer" style="display: none;">
        <h2>Filter Options</h2>
        <div id="imageSelector" style="margin-bottom: 20px; text-align: center;">
            <label for="currentImageSelect" style="margin-right: 10px; font-weight: 500;">View filters for:</label>
            <select id="currentImageSelect" style="padding: 8px 12px; border-radius: 6px; border: 1px solid #ddd;">
                <option value="0">Select an image</option>
            </select>
        </div>
        <div class="filters-grid" id="filtersGrid"></div>
        
        <div class="performance-note">
            <strong>Performance Note:</strong> CSS filters (0-1ms) are applied instantly and are hardware-accelerated. 
            Canvas filters (5-20ms) offer more control but require processing time. For your app, CSS filters are recommended for real-time application.
        </div>
    </div>

    <script>
        const filterConfigs = [
            {
                name: "Original",
                description: "No filter applied",
                type: "css",
                filter: "none"
            },
            {
                name: "Instagram Classic",
                description: "Warm, slightly contrasty - most popular",
                type: "css",
                filter: "brightness(1.05) contrast(1.1) saturate(1.15) sepia(0.1) hue-rotate(-5deg)"
            },
            {
                name: "Food Pop",
                description: "Perfect for food photos - vibrant colors",
                type: "css",
                filter: "brightness(1.08) contrast(1.15) saturate(1.25) sepia(0.05)"
            },
            {
                name: "Clean Professional",
                description: "Subtle enhancement - professional look",
                type: "css",
                filter: "brightness(1.03) contrast(1.08) saturate(1.1)"
            },
            {
                name: "Warm Memories",
                description: "Nostalgic warm tone",
                type: "css",
                filter: "brightness(1.1) contrast(1.05) saturate(1.2) sepia(0.15) hue-rotate(-10deg)"
            },
            {
                name: "Cool Modern",
                description: "Clean, cool aesthetic",
                type: "css",
                filter: "brightness(1.02) contrast(1.12) saturate(1.05) hue-rotate(5deg)"
            },
            {
                name: "High Contrast",
                description: "Bold and dramatic",
                type: "css",
                filter: "brightness(1.05) contrast(1.3) saturate(1.1)"
            },
            {
                name: "Soft Vintage",
                description: "Gentle vintage feel",
                type: "css",
                filter: "brightness(1.08) contrast(0.95) saturate(1.3) sepia(0.2) hue-rotate(-8deg)"
            },
            {
                name: "Canvas Enhanced",
                description: "Advanced processing with sharpening",
                type: "canvas",
                process: enhanceWithCanvas
            }
        ];

        let uploadedImages = [];

        document.getElementById('imageInput').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            if (files.length > 0) {
                uploadedImages = [];
                const originalContainer = document.getElementById('originalImages');
                const imageSelect = document.getElementById('currentImageSelect');
                
                originalContainer.innerHTML = '';
                imageSelect.innerHTML = '<option value="">Select an image</option>';
                
                let loadedCount = 0;
                
                files.forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // Store image data
                        uploadedImages.push({
                            src: e.target.result,
                            name: file.name,
                            index: index
                        });
                        
                        // Create image display
                        const imageSection = document.createElement('div');
                        imageSection.className = 'image-section';
                        
                        const filename = document.createElement('div');
                        filename.className = 'image-filename';
                        filename.textContent = file.name;
                        
                        const img = document.createElement('img');
                        img.className = 'original-image';
                        img.src = e.target.result;
                        
                        imageSection.appendChild(filename);
                        imageSection.appendChild(img);
                        originalContainer.appendChild(imageSection);
                        
                        // Add to selector
                        const option = document.createElement('option');
                        option.value = index;
                        option.textContent = file.name;
                        imageSelect.appendChild(option);
                        
                        loadedCount++;
                        if (loadedCount === files.length) {
                            document.getElementById('originalSection').style.display = 'block';
                            document.getElementById('filtersContainer').style.display = 'block';
                            // Auto-select first image
                            imageSelect.value = 0;
                            generateFilterPreviews(uploadedImages[0].src);
                        }
                    };
                    reader.readAsDataURL(file);
                });
            }
        });

        document.getElementById('currentImageSelect').addEventListener('change', function(e) {
            const selectedIndex = parseInt(e.target.value);
            if (!isNaN(selectedIndex) && uploadedImages[selectedIndex]) {
                generateFilterPreviews(uploadedImages[selectedIndex].src);
            }
        });

        function generateFilterPreviews(imageSrc) {
            const container = document.getElementById('filtersGrid');
            container.innerHTML = '';
            document.getElementById('filtersContainer').style.display = 'block';

            filterConfigs.forEach(config => {
                const card = document.createElement('div');
                card.className = 'filter-card';
                
                const img = document.createElement('img');
                img.className = 'filter-image';
                img.src = imageSrc;
                
                const startTime = performance.now();
                
                if (config.type === 'css') {
                    img.style.filter = config.filter;
                    const endTime = performance.now();
                    const processingTime = (endTime - startTime).toFixed(2);
                    
                    card.innerHTML = `
                        <div class="filter-name">${config.name}</div>
                        <div class="filter-description">${config.description}</div>
                        <div class="processing-time">âš¡ ${processingTime}ms (CSS)</div>
                        <button class="copy-button" onclick="copyFilter('${config.filter}')">Copy CSS Filter</button>
                    `;
                    card.insertBefore(img, card.firstChild);
                    
                } else if (config.type === 'canvas') {
                    // Canvas processing
                    config.process(img, imageSrc).then(({ canvas, processingTime }) => {
                        img.src = canvas.toDataURL();
                        card.innerHTML = `
                            <div class="filter-name">${config.name}</div>
                            <div class="filter-description">${config.description}</div>
                            <div class="processing-time">ðŸ”§ ${processingTime}ms (Canvas)</div>
                            <button class="copy-button" onclick="copyCanvas()">Copy Canvas Code</button>
                        `;
                        card.insertBefore(img, card.firstChild);
                    });
                }
                
                container.appendChild(card);
            });
        }

        function enhanceWithCanvas(img, imageSrc) {
            return new Promise((resolve) => {
                const startTime = performance.now();
                
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                const tempImg = new Image();
                tempImg.onload = function() {
                    canvas.width = tempImg.width;
                    canvas.height = tempImg.height;
                    
                    // Draw original image
                    ctx.drawImage(tempImg, 0, 0);
                    
                    // Get image data for processing
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    
                    // Apply enhancements
                    for (let i = 0; i < data.length; i += 4) {
                        // Brightness and contrast
                        data[i] = Math.min(255, data[i] * 1.1 + 10);     // Red
                        data[i + 1] = Math.min(255, data[i + 1] * 1.1 + 10); // Green  
                        data[i + 2] = Math.min(255, data[i + 2] * 1.1 + 10); // Blue
                        
                        // Subtle saturation boost
                        const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                        data[i] = Math.min(255, avg + (data[i] - avg) * 1.2);
                        data[i + 1] = Math.min(255, avg + (data[i + 1] - avg) * 1.2);
                        data[i + 2] = Math.min(255, avg + (data[i + 2] - avg) * 1.2);
                    }
                    
                    // Put processed data back
                    ctx.putImageData(imageData, 0, 0);
                    
                    const endTime = performance.now();
                    const processingTime = (endTime - startTime).toFixed(2);
                    
                    resolve({ canvas, processingTime });
                };
                tempImg.src = imageSrc;
            });
        }

        function copyFilter(filter) {
            navigator.clipboard.writeText(filter).then(() => {
                alert('CSS filter copied to clipboard!');
            });
        }

        function copyCanvas() {
            const canvasCode = `
// Canvas-based image enhancement
function enhanceImage(canvas, ctx) {
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data;
    
    for (let i = 0; i < data.length; i += 4) {
        // Brightness and contrast
        data[i] = Math.min(255, data[i] * 1.1 + 10);
        data[i + 1] = Math.min(255, data[i + 1] * 1.1 + 10);
        data[i + 2] = Math.min(255, data[i + 2] * 1.1 + 10);
        
        // Saturation boost
        const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
        data[i] = Math.min(255, avg + (data[i] - avg) * 1.2);
        data[i + 1] = Math.min(255, avg + (data[i + 1] - avg) * 1.2);
        data[i + 2] = Math.min(255, avg + (data[i + 2] - avg) * 1.2);
    }
    
    ctx.putImageData(imageData, 0, 0);
}`;
            navigator.clipboard.writeText(canvasCode).then(() => {
                alert('Canvas code copied to clipboard!');
            });
        }
    </script>
</body>
</html> 